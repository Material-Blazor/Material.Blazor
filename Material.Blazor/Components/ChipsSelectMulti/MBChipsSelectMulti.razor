@namespace Material.Blazor

@inherits MultiSelectComponent<TItem, MBIconBearingSelectElement<TItem>>
@typeparam TItem


<div @ref="@ChipsReference"
     class="mdc-chip-set @ActiveConditionalClasses @(@class)"
     style="@style"
     id="@id"
     @attributes="AttributesToSplat()"
     role="grid">

    @for (int j = 0; j < ItemsArray.Length; j++)
    {
        int i = j;
        <MBTouchTargetWrapper @key="@KeyGenerator(ItemsArray[i].SelectedValue)" ApplyTouchTargetWrapper="AppliedTouchTarget">
            <div @attributes="@ChipAttributes[i]">
                <div class="mdc-chip__ripple"></div>

                @if (!string.IsNullOrWhiteSpace(ItemsArray[i].Icon))
                {
                    <MBIcon @attributes="@ChipIconAttributes[i]"
                            IconFoundry="@IconFoundry"
                            IconName="@ItemsArray[i].Icon" />
                }

                @if (!IsSingleSelect)
                {
                    <span class="mdc-chip__checkmark">
                        <svg class="mdc-chip__checkmark-svg" viewBox="-2 -3 30 30">
                            <path class="mdc-chip__checkmark-path" fill="none" stroke="black"
                                  d="M1.73,12.91 8.1,19.28 22.79,4.59" />
                        </svg>
                    </span>
                }

                <span role="gridcell">
                    <span @attributes="@ChipSpanAttributes[i]">
                        <span class="mdc-chip__text">@ItemsArray[i].Label</span>
                    </span>
                </span>
            </div>
        </MBTouchTargetWrapper>
    }
</div>
