@page "/debouncedtextfield"

@inject IMTToastService ToastService

@using System.Runtime.InteropServices


<DemonstrationPage ComponentName="DebouncedTextField"
                   Title="Debounced Text Field Demonstration"
                   DemoComponent="@this"
                   MinDensity="MTDensity.Minus4"
                   RequiresDisableSelection="true">
    <Description>
        <p>
            Shows debounced text field which is a Plus component.
        </p>
    </Description>

    <PageContent>
        <div class="mdc-layout-grid__cell--span-4">
            <MTCard AutoStyled="true">
                <Primary>
                    <h2 class="bmdc-card__title mdc-typography mdc-typography--headline6">
                        Debounced text field
                    </h2>

                    <h3 class="bmdc-card__subtitle mdc-typography mdc-typography--subtitle2">
                        Set the debounce period you want.
                    </h3>

                    <p><MTRadioButtonGroup @bind-Value="@DebouncePeriod" Items="DebouncePeriods" ItemValidation="@MTItemValidation.DefaultToFirst" /></p>

                    <p>
                        <MTDebouncedTextField Label="Debounced Text"
                                              @bind-Value="@Debounced"
                                              TextInputStyle="MTTextInputStyle.Outlined"
                                              LeadingIcon="account_balance_wallet"
                                              DebounceInterval="DebouncePeriod" />
                    </p>

                    <p>Debounced text: <em>'@Debounced'</em></p>
                </Primary>
            </MTCard>
        </div>
    </PageContent>
</DemonstrationPage>


@code {
    private MTListElement<int>[] DebouncePeriods = new MTListElement<int>[]
    {
        new MTListElement<int> { SelectedValue = 300, Label = "300 ms" },
        new MTListElement<int> { SelectedValue = 500, Label = "500 ms" },
        new MTListElement<int> { SelectedValue = 1000, Label = "1,000 ms" }
            };



    private string _debounced = "Initial Value";
    private string Debounced
    {
        get => _debounced;
        set
        {
            _debounced = value;

            ToastService.ShowToast(heading: "Debounced text field", message: $"Value: '{_debounced}'", level: MTToastLevel.Success, showIcon: false);
        }
    }

    private int DebouncePeriod { get; set; } = 300;
}